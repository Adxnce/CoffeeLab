{%load static%}

<nav class="navbar navbar-expand-lg" style="padding-top: 0; padding-bottom: 0;">
    <div class="container" style="background-color: rgb(33, 37, 41, .5);">
      <a class="navbar-brand text-white" href="{% url 'index'%}">
        <img src="{% static 'coffeelab/img/logo.png' %}" alt="Logo" width="80" height="80">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto">
          <li class="nav-item"><a class="nav-link text-white" href="{% url 'index'%}">Inicio</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="{% url 'about_us'%}">Sobre nosotros</a></li>
          <li class="nav-item"><a class="nav-link text-white" href="{% url 'catalogo'%}">Cat√°logo</a></li>
        </ul>
        <div class="d-flex" >
          <a href="{% url 'logout'%}" class="btn btn-outline-secondary me-2" id="logoutBtn" style="display: none;">
            <i class="bi bi-box-arrow-right"></i>
          </a>
          <a href="{% url 'adminPanel'%}" class="btn btn-outline-secondary me-2" id="adminBtn" style="display: none;">
            <i class="bi bi-menu-button-wide"></i>
          </a>
          <a href="{% url 'userPanel'%}" class="btn btn-outline-secondary me-2" id="userPanel" style="display: none;">
            <i class="bi bi-menu-button-wide"></i>
          </a>
          <a href="{% url 'user'%}" class="btn btn-outline-secondary me-2" id="userBtn" style="display: none;">
            <i class="bi bi-person-fill"></i>
          </a>
          <a href="{% url 'cart'%}" class="btn btn-outline-secondary me-2"><i class="bi bi-cart-fill" id="cartBtn" ></i></a>
          <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" class="btn btn-outline-secondary"><i class="bi bi-heart-fill"></i></a>
          
          </a>          
        </div>
      </div>
    </div>
  </nav>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const token = localStorage.getItem('token');
      const rol = localStorage.getItem('rol');

      const userBtn = document.getElementById('userBtn');
      const logoutBtn = document.getElementById('logoutBtn');
      const adminBtn = document.getElementById('adminBtn');
      const userPanel = document.getElementById('userPanel');

      if (token) {
        // Usuario autenticado por token

        logoutBtn.style.display = 'inline-block';
        userBtn.style.display = 'none';
        
        if (rol == 'admin') {
          adminBtn.style.display = 'inline-block';
        } else if (rol == 'cliente') {
          userPanel.style.display = 'inline-block';
        }
      
      } else {
        userBtn.style.display = 'inline-block';
      }

      // borrar la sesion
      document.getElementById('logoutBtn').addEventListener('click', function() {
        localStorage.removeItem('token');
        window.location.href = '/log';
      })
    });
  </script>
  